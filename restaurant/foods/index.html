<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§æ˜¯å“¥ - å¤§æ˜¯å“¥å‘€å…¨æ˜¯æˆï¼Œå¹¸ç¦å¤§å“¥ç©æœºåï¼</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/vue@3.3.4/dist/vue.global.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/naive-ui@2.34.4/dist/index.prod.js"></script>

    <style>
        body {
            margin: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #f9f9fb;
        }

        .header-banner {
            background: url(../bigl.webp);
            background-position: center center;
            background-size: cover;
            color: white;
            padding: 40px 20px;
            text-align: center;
            position: relative;
        }

        .header-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }

        .main-container {
            max-width: 1200px;
            margin: -30px auto 40px;
            padding: 0 20px;
            position: relative;
            z-index: 3;
        }

        .item-icon {
            font-size: 40px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fdfaf2;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .sticky-cart {
            position: sticky;
            top: 20px;
        }

        footer {
            padding: 40px;
            text-align: center;
            color: #999;
            background: #1a1a1a;
        }
    </style>
</head>

<body>

    <div id="app">



        <n-config-provider :theme-overrides="themeOverrides">
            <n-alert type="success" :show-icon="false" closable title="æ¬¢è¿å…‰ä¸´å¤§æ˜¯å“¥ï¼ˆå¤§å“¥å²›æ€»åº—ï¼‰ç‚¹å•å¹³å°ï¼">
                <n-marquee>åŸå¤§å“¥å›½é™…é¤é¦† ç‚¹å•å¹³å°
                </n-marquee>
            </n-alert>
            <div class="header-banner">
                <n-h1 style="color: white; margin: 0; font-weight: 600; z-index: 2; position: relative;">æ¬¢è¿å…‰ä¸´å¤§æ˜¯å“¥</n-h1>
                <n-p
                    style="color: white; opacity: 0.9; z-index: 2; position: relative;">å¤§æ˜¯å“¥å‘€å…¨æ˜¯æˆï¼Œå¹¸ç¦å¤§å“¥ç©æœºåï¼ï¼ˆå¤§å“¥å²›2å·æ€»ä»£ç†åº—ï¼‰</n-p>
                <n-space justify="center" style="margin-top: 15px; z-index: 2; position: relative;">
                    <n-button color="#fff" strong secondary size="small" @click="showEditModal = true">
                        <template #icon><n-icon><svg xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24">
                                    <g fill="none">
                                        <path
                                            d="M21.03 2.97a3.578 3.578 0 0 1 0 5.06l-2.644 2.645a6.45 6.45 0 0 0-1.579-.543L17.94 9L15 6.06L5.062 16a.75.75 0 0 0-.193.333l-1.05 3.85l3.85-1.05A.75.75 0 0 0 8 18.938l1.13-1.13c.114.555.298 1.085.543 1.579l-.612.612a2.25 2.25 0 0 1-.999.58l-5.116 1.395a.75.75 0 0 1-.92-.921l1.395-5.116a2.25 2.25 0 0 1 .58-.999L15.97 2.97a3.578 3.578 0 0 1 5.06 0zM15.5 11c.293 0 .58.025.86.072l.174.716a2 2 0 0 0 2.413 1.475l.098-.026l.601-.179c.363.467.653.997.854 1.57l-.447.431a2 2 0 0 0-.17 2.699l.142.157l.475.457c-.2.573-.49 1.102-.853 1.57l-.602-.179a2 2 0 0 0-2.485 1.352l-.026.098l-.173.716a5.18 5.18 0 0 1-1.723 0l-.172-.716a2 2 0 0 0-2.413-1.476l-.098.026l-.602.178a5.549 5.549 0 0 1-.853-1.57l.447-.43a2 2 0 0 0 .055-2.827l-.055-.055l-.447-.43c.2-.574.49-1.103.853-1.57l.602.178a2 2 0 0 0 2.485-1.351l.026-.098l.172-.716c.28-.047.569-.072.862-.072zm0 4c-.8 0-1.45.672-1.45 1.5c0 .829.65 1.5 1.45 1.5c.8 0 1.45-.671 1.45-1.5c0-.828-.65-1.5-1.45-1.5zm1.53-10.97l-.97.97L19 7.94l.97-.97a2.078 2.078 0 1 0-2.94-2.94z"
                                            fill="currentColor"></path>
                                    </g>
                                </svg></n-icon></template>è´¡çŒ®èœå•
                    </n-button>
                    <n-button color="#fff" strong secondary size="small" @click="fetchMenu" :loading="loading">
                        <template #icon><n-icon><svg xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24">
                                    <g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4"></path>
                                        <path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"></path>
                                    </g>
                                </svg></n-icon></template>åˆ·æ–°
                    </n-button>
                </n-space>
            </div>

            <main class="main-container">
                <n-grid x-gap="24" :cols="12" item-responsive>
                    <n-gi span="12 m:8">

                        <n-card title="èœå•" :bordered="false" size="large">
                            <n-alert style="margin-bottom: 5px;" title="è¯šé‚€åŠ ç›Ÿ" type="info" closable>
                                å¤§æ˜¯å“¥+ä¼ æ’­å¤§å“¥+åŸå¸‚å®£ä¼ +äº§å“+åº—é¢+æµ®æœ¨+å¯å¤åˆ¶æµ‹ç´¢æ¨¡å¼
                                ï¼ˆå…·æœ‰ç¤¾ä¼šæ ‡æ†ç¤ºèŒƒä½œç”¨ è‡ªå¸¦ä¸¤å¤§æ°¸ä¹…å…¨æˆèƒ½åŠ›å†…å®¹ï¼‰
                                <br><n-image height="50" src="../dsg2.webp"
                                    :render-toolbar="renderToolbar"></n-image><br>
                                <n-popover trigger="hover">
                                    <template #trigger>
                                        <n-button>åŠ ç›Ÿå…¥å£</n-button>
                                    </template>
                                    <span>ä½ æƒ³å¤šäº†</span>
                                </n-popover>
                            </n-alert>

                            <n-empty v-if="menuItems.length === 0" description="èœå•åŠ è½½ä¸­..."
                                style="padding: 40px;"></n-empty>

                            <n-grid x-gap="16" y-gap="16" cols="1 s:2 m:2 l:3" responsive="screen">
                                <n-gi v-for="item in menuItems" :key="item.id">
                                    <n-card hoverable>
                                        <div class="item-icon">{{ item.icon }}</div>
                                        <n-text strong style="font-size: 1.1rem;">{{ item.name }}
                                        </n-text><br />
                                        <n-text depth="3"
                                            style="font-size: 0.85rem; height: 40px; display: block; margin-top: 4px;">
                                            {{ item.desc }}
                                        </n-text>
                                        <template #footer>
                                            <n-space align="center" justify="space-between">
                                                <n-text type="warning" strong style="font-size: 1.2rem;">Â¥{{ item.price
                                                    }}</n-text>
                                                <n-button secondary type="primary" size="small"
                                                    @click="addToCart(item)">
                                                    æ·»åŠ åˆ°èœå•
                                                </n-button>
                                            </n-space>
                                        </template>
                                    </n-card>
                                </n-gi>
                            </n-grid>
                        </n-card>
                    </n-gi>

                    <n-gi span="12 m:4">
                        <div class="sticky-cart">
                            <n-card title="è´¦å•" head-style="font-weight: bold;">
                                <div v-if="Object.keys(cart).length === 0" style="text-align: center; padding: 20px 0;">
                                    <n-text depth="3">
                                        <n-empty description="å¤§å“¥ï¼Œä½ è¿˜æ²¡ç‚¹èœ">
                                        </n-empty>
                                    </n-text>
                                </div>

                                <n-list v-else>
                                    <n-list-item v-for="(item, id) in cart" :key="id">
                                        <n-thing :title="item.name">
                                            <template #description>
                                                <n-text depth="3">å•ä»·: Â¥{{ item.price }}</n-text>
                                            </template>
                                        </n-thing>
                                        <template #suffix>
                                            <n-space align="center">
                                                <n-button circle size="tiny" @click="changeQty(id, -1)">-</n-button>
                                                <n-text strong>{{ item.qty }}</n-text>
                                                <n-button circle size="tiny" @click="changeQty(id, 1)">+</n-button>
                                            </n-space>
                                        </template>
                                    </n-list-item>
                                </n-list>

                                <template #action>
                                    <n-statistic label="åˆè®¡" :value="totalPrice" style="margin-bottom: 15px;">
                                        <template #prefix>Â¥</template>
                                    </n-statistic>
                                    <n-button block type="error" size="large" @click="checkout"
                                        :disabled="totalPrice === 0">
                                        ç«‹å³ä¸‹å•
                                    </n-button>
                                </template>
                            </n-card>
                        </div>
                    </n-gi>
                </n-grid>
            </main>

            <footer>
                <p>Â© 2026-11451 å¤§æ˜¯å“¥ï¼ˆå¤§å“¥å›½é™…é¤é¦†ï¼‰<br>
                    å¤§æ˜¯å“¥ä¸å…‰æ˜¯å…¨æˆæ–‡åŒ–ä¹Ÿæ˜¯å¤§å“¥å²›æ–‡åŒ–çš„æ ¹åŸºï¼Œå¤§æ˜¯å¤§å“¥ï¼Œå“¥æ˜¯å¤§å“¥ï¼Œå¤§å“¥æ˜¯å‡èšåŠ›ï¼Œå…¨æˆæ˜¯ç¤¾ä¼šçš„ç¨³å®šï¼Œå¤§å“¥ä¸‡äº‹å…´ï¼Œæ­£å¤§å¤©ä¸‹å“¥ï¼"ä»¥å¤§æ˜¯æœ¬æ–°åª’ä½“ã€å“¥æ˜¯æœ¬å®‰å…¨é£Ÿå“ç‰Œäº§å“ã€ã€Šå¤§æ˜¯å“¥ä¹‹æ­Œã€‹æ­Œæ›²ã€å¤§æ˜¯å“¥ç¤¾äº¤å‹å¯å¤åˆ¶é¤é¥®é—¨åº—ã€å¤§æ˜¯å“¥ç¤¼ä»ªç¤¼ä¿—æœåŠ¡ï¼ˆæ°‘ä¿—é£æ°´ç±»ï¼‰
                    ä¼ æ’­ç¤¾ä¼šåŸºæœ¬è®¤çŸ¥å…±è¯†ï¼Œæ»¡è¶³æ—¶ä»£éœ€æ±‚ï¼</p>
                <p style="font-size: 12px; margin-top: 10px;">å¹¿å‘Šåˆ›æ„è¯·æ¨¡ä»¿ï¼Œæœ¬ç«™ç‚¹ä»…ä¾›å¨±ä¹ï¼Œæ¢—æ¦‚ä¸å¯¹å¤–å…¬å¼€ã€‚</p>
            </footer>

            <n-modal v-model:show="showOrderModal" preset="dialog" type="success" title="ä¸‹å•æˆåŠŸ" positive-text="æ‰“å°å°ç¥¨"
                @positive-click="clearCart">

                <n-page-header subtitle="ï¼ˆå¤§å“¥å²›æ€»åº—ï¼‰" @back="handleBack">

                    <template #title>
                        <a style="text-decoration: none; color: inherit">å¤§æ˜¯å“¥</a>
                    </template>
                    <template #extra>
                        <n-space>
                            ID101
                        </n-space>
                    </template>
                </n-page-header>

                <div style="text-align: center; padding: 20px 0;">
                    <n-h2>å–é¤å·ç  DG-{{ Math.floor(Math.random()*900 + 100) }}</n-h2>
                    <p>æ¬¢è¿å…‰ä¸´å¤§æ˜¯å“¥å¤§å“¥å²›æ€»åº—ï¼æ³è¯·è¯„ä»·æˆ‘ä»¬çš„æœåŠ¡ã€‚</p>
                    <n-rate></n-rate>
                </div>
            </n-modal>

            <n-modal v-model:show="showEditModal" preset="card" title="è´¡çŒ®èœå•æ–¹æ³•" style="width: 400px;">
                <p>è¯·å‰å¾€ GitHub ä»“åº“ä¿®æ”¹ <code>Foods.json</code> æ–‡ä»¶ã€‚è‹¥æ— æ³•è®¿é—®å¯èƒ½éœ€è¦ä¸€äº›æ‰‹æ®µã€‚</p>
                <n-button style="width:80px" tag="a" href="https://github.com/CHEN-EXE/dagetoliet.github.io/"
                    target="_blank" block type="primary">å‰å¾€ä»“åº“</n-button>
            </n-modal>

        </n-config-provider>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;

        const app = createApp({
            setup() {
                const menuItems = ref([]);
                const cart = ref({});
                const loading = ref(false);
                const showOrderModal = ref(false);
                const showEditModal = ref(false);

                // ä¸»é¢˜å®šåˆ¶
                const themeOverrides = {
                    common: {
                        primaryColor: '#d4af37',
                        primaryColorHover: '#b8860b',
                        primaryColorPressed: '#8a6609',
                    }
                };

                const fetchMenu = async () => {
                    loading.value = true;
                    try {
                        const response = await fetch('foods.json');
                        if (!response.ok) throw new Error('ç½‘ç»œè¯·æ±‚é”™è¯¯');
                        menuItems.value = await response.json();
                    } catch (err) {
                        window.$message?.error('åŠ è½½å¤±è´¥: ' + err.message);
                        // æ¨¡æ‹Ÿæ•°æ®ä¾›æµ‹è¯•
                        menuItems.value = [
                            { id: 1, name: 'æµ‹è¯•èœå“', price: 99, icon: 'ğŸœ', desc: 'åŠ è½½Foods.jsonå¤±è´¥åçš„å ä½ç¬¦' }
                        ];
                    } finally {
                        loading.value = false;
                    }
                };

                const addToCart = (item) => {
                    if (cart.value[item.id]) {
                        cart.value[item.id].qty++;
                    } else {
                        cart.value[item.id] = { ...item, qty: 1 };
                    }
                };

                const changeQty = (id, delta) => {
                    if (cart.value[id]) {
                        cart.value[id].qty += delta;
                        if (cart.value[id].qty <= 0) delete cart.value[id];
                    }
                };

                const totalPrice = computed(() => {
                    return Object.values(cart.value).reduce((sum, item) => sum + (item.price * item.qty), 0);
                });

                const checkout = () => {
                    showOrderModal.value = true;
                };

                const clearCart = () => {
                    cart.value = {};
                };

                onMounted(fetchMenu);

                return {
                    menuItems, cart, loading, showOrderModal, showEditModal,
                    themeOverrides, totalPrice,
                    fetchMenu, addToCart, changeQty, checkout, clearCart
                };
            }
        });

        app.use(naive);
        app.mount('#app');
    </script>

</body>

</html>